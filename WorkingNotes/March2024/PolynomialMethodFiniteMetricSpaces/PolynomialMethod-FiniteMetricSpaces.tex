\documentclass[12pt]{article}

\usepackage{geometry}
\usepackage{amsmath, amsthm, amssymb}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{tkz-berge}
\usepackage{tkz-graph}
\usepackage{booktabs} % See the package documentation for guidelines on formal tables: https://ctan.org/pkg/booktabs
\usepackage{verbatim} % Used to typeset, for example, code snippets or pseudo-code for algorithms.
\usepackage{dsfont} % Extra fontset for helpful mathematics symbols, e.g. \mathds{1}
\usepackage{etoolbox} % Used to allow boolean variables for use in the title page
\usepackage{import}
\usepackage{lipsum}
\usepackage{subcaption}
\usepackage{float}
\usepackage{enumitem}
\usepackage{tabularx}
\usepackage{array}
\usepackage{pdfpages}
\usepackage{mathtools}
\usepackage{hyperref}
\usepackage{mathbbol}
\usepackage{caption}

\newcolumntype{C}[1]{>{\centering\arraybackslash}m{#1}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\T}{\mathbb{T}}
\newcommand{\cA}{\mathcal{A}}
\newcommand{\cB}{\mathcal{B}}
\newcommand{\cD}{\mathcal{D}}
\newcommand{\cP}{\mathcal{P}}
\newcommand{\cM}{\mathcal{M}}
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}
\newcommand{\norm}[1]{\left\lVert #1 \right\rVert}
\newcommand{\set}[2]{\left\{#1 \ : \ #2\right\}}
\newcommand{\conv}[1]{\underset{#1}\longrightarrow}
\newcommand{\Mod}[1]{\ (\mathrm{mod}\ #1)}
\newcommand{\Supp}[0]{\ \mathrm{Supp}\ }
\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}
\DeclareMathOperator{\lcm}{lcm}

\newcommand{\Cross}{\mathbin{\tikz [x=1.4ex,y=1.4ex,line width=.2ex] \draw (0,0) -- (1,1) (0,1) -- (1,0);}}

\newcommand\restr[2]{{% we make the whole thing an ordinary symbol
		\left.\kern-\nulldelimiterspace % automatically resize the bar with \right
		#1 % the function
		\vphantom{\big|} % pretend it's a little taller at normal size
		\right|_{#2} % this is the delimiter
}}
% Custom math operators (analogous to \lim, \sup, etc).
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\od}{od}
\DeclareMathOperator{\subspan}{span}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\diam}{diam}
\DeclareMathOperator{\rad}{rad}
%\DeclareMathOperator{\span}{span}

\newtheorem{thm}{Theorem}[section] % Numbering is impacted by [chapter]; could do [section] or [subsection] also.
\newtheorem{lem}{Lemma} % The [thm] argument says to number Lemma in sequence with Theorem.
\newtheorem{prop}[thm]{Proposition}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{conj}[thm]{Conjecture}
\newtheorem{question}{Question}
% These environments are unnumbered and will not count toward the numbering.
%\newtheorem*{question}{Question}
\newtheorem*{answer}{Answer}
\newtheorem*{conjecture}{Conjecture}
\newtheorem*{claim}{Claim}
% These environments are definitions; they have a different style (bold label, standard font).
\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition} % These definitions are also numbered in sequence with Theorem.
\newtheorem{eg}{Example}
\newtheorem{rem}[thm]{Remark}
\newtheorem{obs}{Observation}

\title{ \vspace{-3cm} Relation Partitions}
\author{Tao Gaede}

\begin{document}
	\maketitle
	
	\section{Summary}
	
	\section{Preliminaries}
	
	Bipartite Distance Multigraph, Distance Graphs, Distance Multiplicities as adj mat (or Laplacian) traces,
	
	Combinatorial Nullstellensatz, Eigenvalue interlacing theorem
	
	\section{Nullstellensatz Shows Existence of Dense Subgraph}
	
	\section{General Position (Max Distance Degree) Permits Large Order}
	
	\begin{thm}
		Let $X$ be a finite metric space with $n$ points and $r$ distinct distances $d_1, \ldots, d_r$ whereby either $n/2$ or $(n+1)/2$ is a prime $p$.  Let $d \in \Z^+$.  Suppose $\Delta(D_{d_k}) \leq d$ for all $k \in [1,r]$.  Then there is a set of $P$ points and $D$ distances satisfying $|P| \geq |D| \geq p/d$ such that 
		\begin{enumerate}
			\item for each $v \in P$, there are $p$ points $u \in P \setminus \{v\}$ such that $d(u,v) \in D$; and
			\item for each $d_k \in D$, there is an $\ell_k \in \Z^+$ such that there are $\ell_k p$ points $P$ at distance $d_k$ with some other point in $X$.
		\end{enumerate}
	\end{thm}

	\begin{cor}
		The average multiplicity of distances in $D$ is at least $\frac{|P|p}{2|D|}$.
	\end{cor}
	
	\section{Eigenvalue Interlacing and Distance Multiplicity Stability}
	Let $A_k$ be the adjacency matrix for distance $d_k$ in $X$.  Then $2m(d_k) = Tr(A_k^2) = \deg_{\mathcal{M}}(d_k)$.  We say that a point $v \in X$ is \emph{distance independent} if for all $u,w \in X \setminus \{v\}$, $d_{X \setminus \{v\}}(u,w) = d_{X}(u,w)$.
	
	Let $v$ be a distance independent vertex of $X$.  Let $\alpha_1^{(k)} \geq \alpha_2^{(k)} \geq \cdots \geq \alpha_n^{(k)}$, and $\beta_1^{(k)} \geq \beta_2^{(k)} \geq \cdots \geq \beta_{n-1}^{(k)}$ be the eigenvalues of $A_k(X)$ and $A_k(X \setminus \{v\})$, respectively.  Similarly, let $\lambda_1^{(k)} \geq \lambda_2^{(k)} \geq \cdots \geq \lambda_n^{(k)}$, and $\mu_1^{(k)} \geq \mu_2^{(k)} \geq \cdots \geq \mu_{n-1}^{(k)}$ be the eigenvalues of $\mathcal{L}(A_k(X))$ and $\mathcal{L}(A_k(X \setminus \{v\}))$, respectively.
	\begin{thm}
		  Let $X$ and $Y$ finite metric spaces that differ by a single distance independent point.  Then for every $k \in [1,r]$, 
		$$|m_X(k) - m_{Y}(k)| < \tfrac{1}{2}(\alpha_1^2 + \alpha_n^2),$$
		and
		$$|m_X(k) - m_{Y}(k)| \leq \tfrac{\lambda_1}{2}.$$
	\end{thm}
	\begin{proof}
		Without loss of generality, suppose $Y = X \setminus \{v\}$, where $v$ is a distance independent point.  For ease of notation, we omit the $(k)$ superscripts in the eigenvalues for this proof.  
		
		For the Laplacians $\mathcal{L}(A_k(X))$ and $\mathcal{L}(A_k(Y))$, we have by eigenvalue interlacing that $\lambda_1 \geq \mu_1 \geq \cdots \geq \mu_{n-1} \geq \lambda_n$, which immediately implies
		$$Tr\mathcal{L}(A_k(X)) - \lambda_1 = \sum_{j=2}^n \lambda_j \leq \sum_{j=1}^{n-1}\mu_j \leq \sum_{j = 1}^{n-1}\lambda_j = Tr\mathcal{L}(A_k(X)) - \lambda_n.$$
		Since $Tr\mathcal{L}(A_k(Y)) = \sum_{j=1}^{n-1}\mu_j$, we have that $|m_X(k) - m_Y(k)| \leq \tfrac{1}{2}(\lambda_1 - \lambda_n)$.  But the laplacian is singular with all eigenvalues non-negative, so $\lambda_n = 0$.
		
		For the adjacency squares, since $v$ is independent, by eigenvalue interlacing, we again have
		$$\alpha_1 \geq \beta_1 \geq \alpha_2 \geq \beta_2 \geq \cdots \geq \alpha_{n-1} \geq \beta_{n-1} \geq \alpha_n.$$
		Let $i$ be the smallest integer satisfying $\alpha_i< 0$.  Then for all $j \in [i,n-1]$, $\alpha_j^2 \leq \beta_j^2 \leq \alpha_{j+1}^2$, and similarly, for all $j \in [1,i-2]$, $\alpha_j^2 \geq \beta_j^2 \geq \alpha_{j+1}^2$.  Note that if $i = 2$, then $\beta_1$ and $\alpha_1$ are the only positive eigenvalue of $A_k(Y)$ and $A_k(X)$, respectively, which means that $\beta_1 = \sum_{j=2}^{n-1}|\beta_j| \geq \sum_{j=2}^{n-1}|\alpha_j| \geq |\alpha_2|$.  Thus we have that
		$$\sum_{j=1}^n\alpha_j^2 - \alpha_1^2 - \alpha_n^2 \leq \sum_{j = 1}^{n-1}\beta_j^2 = \sum_{j=1}^{i-1} \beta_j^2 + \sum_{j=i}^{n-1}\beta_j^2 \leq \sum_{j=1}^{n}\alpha_j^2 - \alpha_i^2.$$
		Thus the multiplicity gap for distance $d_k$ between $X$ and $Y$ is 
		$$|m_X(k) - m_Y(k)| \leq \frac{1}{2}(\alpha_1^2 + \alpha_n^2 - \alpha_i^2) < \frac{1}{2}(\alpha_1^2 + \alpha_n^2).$$
		Note that $\alpha_i$ is one of the eigenvalues of $A_k(X)$ with smallest magnitude.
	\end{proof}

	\begin{thm}
		Let $X$ be a finite metric space with $n$ points and $r$ distinct distances $d_1, d_2, \ldots, d_r$.  Let $p$ be a prime satisfying $p-1 < \tfrac{n(n-1)}{n+r}$.  Let $\mathcal{U} = (P,D)$ be a subgraph of $\mathcal{M}(X)$ such that for all $v \in P$, $\deg_{\mathcal{U}}(v) = h_vp$ with $h_v \in \Z^+$ and for all $d_k \in D$, $\deg_{\mathcal{U}}(d_k) = \ell_k p $ with $\ell_k \in \Z^+$.  Then for all $d_k \in D$, it holds that
		$$\sum_{j=n-|P|+1}^n \lambda_j^{(k)} \leq \ell_k p.$$
	\end{thm}
	\newpage
	\section{Relation Partition and Their Cardinalities}
	Let $X$ be a finite set of $n$ elements, called points.  Let $R_1, \ldots, R_r$ be symmetric relations that partition the unordered pairs of points in $X$.  We call such a partition a \emph{relation partition of $X$}.  Then for each $k \in [r]$, we define $G_k$ to be the graph corresponding to $R_k$; that is, $G_k$ has vertex set $X$ where $u\sim v$ if and only if $\{u,v\} \in R_k$.  
	
	We are interested in the set $\{|R_k|: k \in [r]\}$.  Observe that $|R_k| = \tfrac{1}{2}Tr(L(G_k))$, where $L$ denotes the Laplacian matrix.  We will use the following well known tools of Lemma \ref{Lem-CombinatorialNullstellensatz} and Lemma \ref{Lem-EigenvalueInterlacing}.
	
	\begin{lem}[Combinatorial Nullstellensatz]\label{Lem-CombinatorialNullstellensatz}
		Let $\mathbb{F}$ be a field and let $f \in \mathbb{F}[x_1,x_2,\ldots,x_n]$ be a polynomial such that $\deg(f) = \sum_{i=1}^n t_i$ and the coefficient of $\prod_{i=1}^n x_i^{t_i}$ is non-zero.  Let $S_1,S_2,\ldots,S_n$ be subsets of $\mathbb{F}$ such that $|S_i| > t_i$ for all $i \in [n]$.  Then there exists $(s_1,s_2,\ldots,s_n) \in S_1 \times S_2 \times \cdots \times S_n$ such that $f(s_1,s_2,\ldots,s_n) \neq 0$.
	\end{lem}

	\begin{lem}[Eigenvalue Interlacing]\label{Lem-EigenvalueInterlacing}
		...
	\end{lem}
	
	We say that a relation partition $R_1,\ldots, R_r$ of $X$ is \emph{dependent} if there exists a subset $S \subseteq X$ such that for some $v \in S$ there is an $x \in X$ satisfying $R_k(v,x),$ and $u,w \in X \setminus S$ satisfying $R_{k'}(u,w)$ such that $R_k(v,x) \Leftrightarrow R_{k'}(u,w)$.  That is, deleting the vertices of $S$ causes point pairs outside of $S$ to no longer be related.  For example, if $(X; R_1,\ldots, R_r)$ is a metric space for a graph in which $R_k$ corresponds to the distinct distance $k$, any vertex cut destroys geodetic paths between vertex pairs in the different resulting components.  Note that dependence occurs here because the geodetic paths are in $X$ itself rather than an underlying space.  If on the other hand, $X$ is a subset of an underlying metric space $\mathcal{X}$ whereby the distances are calculated with respect to geodetic paths in $\mathcal{X}$, then no $(X \subseteq \mathcal{X};R_1,\ldots, R_r)$ can be dependent.  We say that $(X: R_1,\ldots, R_r)$ is \emph{independent} if it is not dependent.
	
	\begin{lem}\label{Lem-NullstellensatzEigenvalueInterlacing}
		Let $X$ be a finite set of $n$ points with an independent relation partition $R_1, \ldots, R_r$.  Then for any prime $p$ satisfying $p-1 < \tfrac{n(n-1)}{n+r}$, there exist nonempty subsets $D \subseteq [r]$ and $P \subseteq X$, such that for all $k \in D$, there is a positive integer $\ell_k$ such that
		$$\ell_k p \leq \sum_{j =1}^{|P|}\lambda_j^{(k)},$$
		where $\lambda_j^{(k)}$ is the $j$-th largest eigenvalue of $L(G_k)$.
	\end{lem}
	\begin{proof}[Proof of Lemma \ref{Lem-NullstellensatzEigenvalueInterlacing}]
		Let $\mathcal{M}$ be the bipartite multigraph with point vertices $X$ in one part and relation vertices for each $R_k, k\in [r]$ for the other part.  For each $k \in [r]$, and for each $u,v \in X$ satisfying $R_k(u,v)$ we include the edges $u\sim R_k$ and $v \sim R_k$.
		\begin{claim}[Variation of Theorem 6.1 in \cite{alon}]\label{Prop-SubgraphNullstellensatzResult}
				The multigraph $\mathcal{M}(X)$ contains a non-empty subgraph $\mathcal{U}$ such that for every $u \in V(\mathcal{U})$, $\deg(u) \in \{kp: k \in \Z^+\}$.  %In particular, $U$ contains vertices in each part of $\mathcal{M}$, each with degree at least $p$.
		\end{claim}
			\begin{proof}[Proof of Claim]
				We define a polynomial $f$ with degree $|E(\mathcal{M})|$ over $\mathbb{F}_2$, and using the fact that $a^{p-1}$ $\Mod{p}$ $\equiv 1$ for all $a \not\equiv 0 \Mod{p}$, we show the existence of the desired subgraph using the nullstellensatz directly.
				Define the polynomial
				$$f(x_e:e \in E(\mathcal{M})) := \prod_{v \in V(\mathcal{M})} \biggr[1 - \Big(\sum_{\substack{e \in E(\mathcal{M})\\ v \in e}}x_e \Big)^{p-1} \biggr] - \prod_{e \in E(\mathcal{M})}(1-x_e).$$
				The degree of $f$ is $|E(\mathcal{M})|$ because every other term has degree at most
				$$|V(\mathcal{M})| (p-1) = (n+r)(p-1) < n(n-1) = |E(\mathcal{M})|.$$
				Note that the max degree term of $f$, $(-1)^{|E(\mathcal{M})|+1}\prod_{e \in E(\mathcal{M})} x_e$, has a non-zero coefficient. 
				To apply the nullstellensatz, we consider solutions to $f$ of the form $(s_1,$ $s_2,$ $\ldots,$ $s_{|E(\mathcal{M})|}) \in \{0,1\}^{|E(\mathcal{M})|}$ (where $t_i = 1$ for all $i \in [|E(\mathcal{M})|]$).  Thus by Lemma \ref{Lemma-CombinatorialNullstellensatz}, there exists a edge vector $\mathbf{u}=(u_e:e \in E(\mathcal{M}))$ such that $f(\mathbf{u}) \neq 0$.  By the definition of $f$, $\mathbf{u} \neq \mathbf{0}$ because $f(\mathbf{0}) = 0$, so some of its entries are $1$.  This means that the latter product in $f$ vanishes when evaluated at $\mathbf{u}$.  The former product in $f$ can be non-zero only when
				$$\Big(\sum_{\substack{e \in E(\mathcal{M})\\ v \in e}}u_e \Big)^{p-1} \equiv 0 \Mod{p}.$$  
				It follows that $\mathbf{u}$ corresponds to a subgraph $\mathcal{U}$ of $\mathcal{M}(X)$ whose vertex degrees are congruent to $0 \Mod{p}$.  Since $\mathbf{u} \neq \mathbf{0}$, there exists a vertex $v \in \mathcal{U}$ such that $\deg_{\mathcal{U}}(v) \in \{kp: k \in \Z^+\}$.  Note that since $\mathcal{U}$ is a subgraph of $\mathcal{M}$, which is bipartite, the degree sums in each part need to be equal; therefore, the vertices of $\mathcal{U}$ all have degrees being a positive multiple of $p$, and these positive degree vertices are in both parts. \qedhere
			\end{proof}
		Notice that the claim implies that for each $k \in D$, there exists a positive integer $\ell_k$ such that $\deg_{\mathcal{U}}(R_k) = \ell_k p$.  Our goal is to lower bound the degrees of a subset of the relation vertices of $\mathcal{M}$.  Using what we know about the degrees of $\{R_k: k \in D\}$ from the subgraph $\mathcal{U}$ we obtained in the claim above, we now apply eigenvalue interlacing on the laplacians of the $G_k$ graphs for $k \in D$ on the complement of the point vertices of $\mathcal{U}$.
		
		Let $P$ be the point vertices of $\mathcal{U}$, and set $m := |P|$.  For each $k \in D$, let $\mu_{1}^{(k)} \geq \mu_2^{(k)} \geq \cdots \geq \mu_{n-m}^{(k)}$ be the laplacian eigenvalues of $G_k \setminus P$.  Then by Lemma \ref{Lem-EigenvalueInterlacing}, we have that for each $j \in [n-m]$, $\lambda_{m+j}^{(k)} \leq \mu_j^{(k)}$.  For each $v \in P$, let $N_k(v)$ be the $k$-neighbourhood of $v$ in $X$; that is, $N_k(v)$ is the set of other points $u \in X$ satisfying $R_k(v,u)$.  Note that $\deg_{G_k}(v) = |N_k(v)|$.  Since $\sum_{j=1}^{n-m} \mu_j^{(k)}$ counts the degree of $R_k$ in $\mathcal{M}$ involving edges incident to point vertices only in $X \setminus P$, it follows that
		$$\sum_{j=1}^n \lambda_{j}^{(k)} = \sum_{j=1}^{n-m} \mu_j^{(k)} - \sum_{v \in P} \deg_{G_k}(v).$$
		Since $\ell_k p = \deg_{\mathcal{U}}(R_k) \leq \sum_{v\in P} \deg_{G_k}(v)$, it follows that for each $k \in D$,
		$$\sum_{j=m+1}^n \lambda_j^{(k)} \leq \sum_{j=1}^n \lambda_j^{(k)} - \ell_kp \Leftrightarrow \ell_k p \leq \sum_{j=1}^m \lambda_j^{(k)},$$
		as desired.
	\end{proof}
	
	
	
	Lemma \ref{Lem-NullstellensatzEigenvalueInterlacing} is substantially more powerful than a pigeonhole argument, because it provides us with a set of relations of larger cardinality, rather than only one.  Note that PHP implies that there is some relation $R_k$ with cardinality at least $\ceil{\tfrac{n(n-1)}{4r}}$. Lemma \ref{Lem-NullstellensatzEigenvalueInterlacing} gives us a \textbf{set} $D$ of relations with large cardinality, and we can control the cardinality of $D$ to ensure that we have larger set of relations with this cardinality.  What follows are conditions that allow us to control $|Y|$ and $|D|$.  What follows are conditions that enable us to control these quantities, which will enable us to prove necessary lower bounds on the relation cardinalities.  In particular, we prove a necessary lower bound on the maximum relation cardinality in various contexts.  Note that in metric spaces, this is the same thing as lower bounding the maximum multiplicity of a distinct distance.
	
	There is a special case when $n/2$ or $(n+1)/2$ is prime since in this case the point vertices of the subgraph of $\mathcal{M}$ given by the nullstellensatz must have degree $p$.
	
	\begin{cor}
		If $\ceil{n/2}$ is prime, then $|Y| \geq |D|$ and 
		$$|Y| p \leq \sum_{k \in D}\sum_{j =1}^{|Y|}\lambda_j^{(k)}.$$
	\end{cor}
	\begin{proof}
		Since no point can be related with more than $n-1$ other points, the point vertices in the multi-subgraph $\mathcal{U}$ from the proof of Lemma \ref{Lem-NullstellensatzEigenvalueInterlacing} have degree exactly $p = \ceil{n/2}$.  Additionally, since $\mathcal{U}$ is bipartite, the degree sums in both the point and relation parts need to be equal, so $m = \sum_{k \in D}\ell_k$. \qedhere
	\end{proof}

	The next corollary introduces a natural condition in the context of geometric finite metric spaces where the condition of general position with respect to spheres is considered.  For example, suppose $X$ is a finite metric space in $\R^{d-1}$ such that we forbid any $d+1$ points being on a $(d-2)$-sphere $\mathcal{S}^{d-2}$; then, this implies that no point in $X$ can be at equal distance with more than $d$ other points in $X$.
	\begin{cor}
		If for each $k \in [r]$, it holds that $\Delta(G_k) \leq d$ for some positive integer $d$, then $m \geq \ceil{|D|/d}$.
	\end{cor}
	
	
	\iffalse
	Let $X_1,\ldots, X_s$ be finite sets with cardinalities $n_1,\ldots, n_s$.  Suppose these sets have independent relation partitions $\{X_i: R_1^{i},\ldots, R_r^{i}\}$, where some $R_k^{i}$ may be empty.  For each $k \in [r]$ set $R_k = \cup_{i=1}^s R_k^i$.  Set $n:= |\bigcup_{i \in [s]}X_i|$.  Suppose $\ceil{n/2}$ is prime.  There are $\sum_{i \in [s]}{n_i \choose 2}$ unordered pairs and $r$ relations.  Then if $\ceil{n/2} -1 < \frac{\sum_{i \in [s]}{n_i \choose 2}}{n+r}$, we get a nice subgraph and can do some good stuff!....
	
	\begin{thm}
		Let $X_1,\ldots, X_s$ be finite sets with cardinalities $n_1,\ldots, n_s$ satisfying $n_i \in [N-\delta, N]$ with $\ceil{(N-\delta)/2}$ prime.  Suppose these sets have independent relation partitions $\{X_i: R_1^{i},\ldots, R_r^{i}\}$, where some $R_k^{i}$ may be empty.  For each $k \in [r]$ set $R_k = \cup_{i=1}^s R_k^i$.  Suppose for each $k \in [r]$, $\Delta(G_k) \leq d$.  Then there exists a set $I \subset [s]$ satisfying $|I| \leq \frac{\sqrt{s}}{2d}$ such that
		$$\biggr|\bigcup_{i \in I}X_i \biggr| \geq \frac{\sqrt{s}\ceil{(N-\delta)/2}}{2d^2}.$$
	\end{thm}
	
	Let $X_1, \ldots, X_s$ be finite sets with cardinalities $n_1,\ldots, n_s$, respectively.  Let $R_1, \ldots, R_r$ be a relation partition of the union of unordered pairs from each of $X_1, \ldots, X_s$.  Let $p$ be the largest prime satisfying $p-1 < \tfrac{n_i(n_i-1)}{n_i+r}$ for all $i \in [s]$.  Then there exists a $D \subseteq [r]$ and $m \geq 1$ such that for all $k \in D$, there exists a nonnegative integer sequence $(\ell_k^{(1)}, \ldots, \ell_k^{(s)})$, not all $0$ such that
	$$ \sum_{i = 1}^s\ell_k^{(i)}p \leq \sum_{j=1}^m \lambda_j^{(k)}.$$
	
	[proof of something like this]
	
	Under what conditions can we ensure that all subgraphs given by the nullstellensatz share a relation vertex?  Such conditions provide a natural lower bound on a maximum cardinality of a relation.  The next theorem presents such a condition.
	
	\begin{thm}
		Suppose there exists an integer $t$ satisfying $t(t-1) = \sum_{i=1}^s n_i(n_i-1)$.  Suppose each $G_k$ has max degree $d$, $r = t-1$, and $s \geq Cd^2$... other conditions needed.  Then there exists a $k \in [r]$ such that $|R_k| \geq t$.
	\end{thm}

	\begin{rem}
		Notice that the above theorem provides a general necessary condition for the existence of a crescent family.
	\end{rem}
	\fi

	\newpage
	\section{Multiple Set Version}
	
	Let $X_1,\ldots, X_s$ be finite sets with cardinalities in $[N/2, N]$.  Let $R_1,\ldots, R_r$ be symmetric relations that partition $\bigcup_{i \in [s]}{X_i \choose 2}$.  Our goal is to understand the cardinalities of $R_1,\ldots, R_r$.
	
	We say that a set $X$ has \emph{max degree $d$} in $\{R_1,\ldots,R_r\}$ if for each $k \in [r]$ and $v \in X$, there are at most $d$ points $u\in X \setminus \{v\}$ such that $\{u,v\} \in R_k$.  Note that this condition is equivalent to the max degree of the graph $G_k$ being at most $d$.
	
	\begin{thm}\label{Thm-MainMultipleSetResult}
		Let $s$, $r$, and $d$ be positive integers and $X_1,\ldots, X_s$ be finite sets with max degree $d$ and symmetric relation partitions $P_1,\ldots,P_s$, respectively, where each $P_i \subseteq \{R_1, \ldots, R_r\}$.  Let $p$ be the largest prime satisfying $p \leq \min_{i \in [s]}\big(\tfrac{|X_i|(|X_i|-1)}{|X_i|+|P_i|} \big)$.  Then either there exists a non-negative integer $\ell$ and a set of distinct relations $\{R_{j_q}: q \in [\tfrac{sp^2}{2td} + \ell]\}$ such that 
		$$|R_{j_q}| \geq \biggr(\frac{\tfrac{sp}{d}-(q-1)2t/p}{\tfrac{sp^2}{2td} + \ell-(q-1)} \biggr)\frac{p}{2},$$ 
		or there is some $k \in [r]$ such that $|R_k| > t$.%if $t \leq \tfrac{sp^2}{2rd}$,
		%If every collection $\mathcal{D} = \{D_i \subseteq P_i: |D_i| \geq \ceil{p/d}, i \in [s]\}$ with size exactly $\floor{2t/p}$ satisfies $\bigcap_{D \in \mathcal{D}}D \neq \emptyset$, then 
		%there exists a $k \in [r]$ such that $|R_k|>t$.
		%It holds that if for every $I \subset [s]$ satisfying $|I| \leq 2r/p$, every collection of the form $\{Y_i\subseteq X_i: i \in I, |Y_i| \geq \tfrac{p}{3d}\}$ satisfies $|\bigcup_{i \in I}Y_i| > \tfrac{2rN}{p}$, then there exists $k \in [r]$ such that $|R_k| > r$.
	\end{thm}

	\begin{proof}
		Let $\{(Y_i,D_i): i \in [s]\}$ be the bipartite multigraphs obtained from Lemma \ref{Lem-NullstellensatzEigenvalueInterlacing} applied to each $(X_i,P_i)$ with the prime $p$.  We have by max degree that each relation vertex in $(Y_i,D_i)$ has at most $d$ edges with each point vertex, so $|D_i| \geq \ceil{p/d}$.  Suppose there is a subcollection $\mathcal{D}$ of $\{D_1,\ldots, D_s\}$ of size at least $2t/p$ such that $\bigcap_{D \in \mathcal{D}}D \neq \emptyset$.  Then there exists a $k \in [r]$ satisfying $|R_k| > t$.  Otherwise, each relation $R_1, \ldots, R_r$ is contained in fewer than $2t/p$ of the sets $D_1,\ldots, D_s$.  Consider the $(0,1)$ incidence matrix $A$ with rows corresponding to the relations in $\bigcup_{i \in [s]}D_i$ and columns the sets $D_1,\ldots, D_s$.  The row sums of $A$ are at most $2t/p$ and the column sums are at least $p/d$, and since there are $s$ columns, we need enough rows $r'$ to satisfy $r' (2t/p) \geq sp/d$.  Thus $|\bigcup_{i \in [s]}D_i| \geq \tfrac{sp^2}{2td}$.  Suppose $r' = \tfrac{sp^2}{2td} + \ell$, and note that all of these rows are non-zero.  Rearrange the rows of $A$ by row sum from highest to lowest.  The average number of $1$s in these $r'$ rows is $\tfrac{sp}{dr'}$, so there exists a row $r_1$ with this many $1$s; suppose $r_1$ has max row sum.  Delete $r_1$ from $A$ and what remains is a matrix with at most $sp/d - 2t/p$ $1$s and $r'-1$ rows.  By induction on $q$, for all $q \in [r'+\ell]$, there is a row $r_q$ with at least $(\tfrac{sp}{d}-(q-1)2t/p)\tfrac{1}{(r'-(q-1))}$ $1$s.  Therefore, there exists a non-negative integer $\ell$ and a set of distinct relations $\{R_{j_q}: q \in [r']\}$ such that $|R_{j_q}| \geq (\tfrac{sp}{d}-(q-1)2t/p)\tfrac{p}{2(r'-(q-1))}$. \qedhere
		
		
		
		%Therefore, there exists at least $\tfrac{sp^2}{2td}$ relations $R_1,\ldots, R_r$ with cardinality at least $p/2$. \qedhere
		
		%We have $s$ sets of relation vertices of size at least $\ceil{p/d}$, so by pigeonhole principle, there is a $J \subseteq [s]$ satisfying $|J| \geq \ceil{\tfrac{sp}{rd}}$ such that $\bigcap_{i \in J}D_i \neq \emptyset$. %By assumption, every $I \in {[s] \choose \floor{2t/p}}$ satisfies $\bigcap_{i \in I}D_i \neq \emptyset$, 
		%Thus there is some relation vertex $R_k$ in this intersection with degree at least $\tfrac{sp}{rd}p$.  Choose $s_0$ such that $\tfrac{s_0p}{rd}p = 2t \Leftrightarrow s_0 = \tfrac{2trd}{p^2}$.  So, for $s > s_0$, $R_k$ has degree greater than $2t$ in $\bigcup_{i \in [s]}(Y_i,D_i)$, implying that $|R_k| > t$. \qedhere 
		%Our goal is to upper bound $|\bigcup_{i \in I}Y_i|$ using what we know about $\{D_i: i \in I\}$. Since $X_i$ has max degree $d$, so does $Y_i$, thus each point vertex in $(Y_i,D_i)$ has at least $\ceil{p/d} \geq p/d$ relation vertex neighbours, which means that $|D_i| \geq p/d$. Since $p$ is chosen to be largest satisfying $p \leq \ceil{|X_i|/2}$ and each $|X_i| \geq N/2$ with $\ceil{N/4}$ prime, we have $p \geq N/4$; this means that no point vertex in $(Y_i,D_i)$ can have degree greater than $3p$, and so $|Y_i| \geq \tfrac{|D_i|}{3} \geq \tfrac{p}{3d}$.  Thus 
		%$$\biggr|\bigcup_{i \in I}Y_i \biggr| \leq |I||Y_i| \leq \frac{2r}{p} N.$$
	\end{proof}
	
	A nice thing about this theorem is that very little is assumed about $R_1,\ldots, R_r$, other than that their graphs have max degree $d$.  That is, we haven't specified any cardinality lists for the relations in each $P_i$.  But nonetheless, we can still lower bound the max cardinality of a relation.  
	
	As mentioned above, we need a ``dense subgraph existence" argument like Lemma \ref{Lem-NullstellensatzEigenvalueInterlacing} to get us a \textbf{subset} of large cardinality relations for each pair $(X_i,P_i)$.  PHP with the max degree condition alone cannot give us such relation sets to then find a non-empty intersection.  I think Lemma \ref{Lem-NullstellensatzEigenvalueInterlacing} is a proof of concept of this idea, and it would be interesting to explore other techniques or conditions that enable us to find dense subgraphs of $\mathcal{M}$ to make the PHP argument in Theorem \ref{Thm-MainMultipleSetResult} go through.
	
	Notice that the condition in Theorem \ref{Thm-MainMultipleSetResult} cannot be met if $\tfrac{2trd}{p^2} \geq s$.  While I currently don't see why one would have $d$ grow as a function of $s$, there are cases when both $t$ and $r$ grow with $s$.  For example in crescent families of sets $X_i$ with max degree $d$ (note the constituent sets are not assumed to be crescents here), if we wanted to contradict this structure by showing that there is some $t > r$, we would run into trouble because the binomial condition requires $r(r-1)= \sum_{i\in[s]}|X_i|(|X_i|-1)$.  If we assume the balanced case (to maximize $p$, say) where we assume $|X_i| \sim N$ and so at best $p \sim N/2$, we would have roughly that $r \sim \sqrt{s}N$, and since we want $t \geq r$, we have that $s \leq \tfrac{2trd}{p^2} \leq 8sd$, which means the condition in Theorem $\ref{Thm-MainMultipleSetResult}$ cannot be met.  Although, I think the condition is close to being met here; so I suspect there's a way to somehow improve Theorem \ref{Thm-MainMultipleSetResult} (and possibly add a condition) to get some kind of upper bound on the number of sets in a crescent family.
	
	The following is a necessary lower bound on the maximum relation cardinality for set families with constituent sets having max degree $d$.
	
	\begin{cor}
		If $X_1,\ldots,X_s$ are finite sets with symmetric relation partitions $P_1,\ldots, P_s \subseteq \{R_1,\ldots, R_r\}$ with max degree $d$.  Let $p$ be the largest prime satisfying $p \leq \min_{i \in [s]}\big(\tfrac{|X_i|(|X_i|-1)}{|X_i|+|P_i|} \big)$.  Then $\max_{k\in[r]}(|R_k|) > \tfrac{sp^2}{2rd}$.  
	\end{cor}
	\begin{proof}
		We contradict Theorem \ref{Thm-MainMultipleSetResult} otherwise. 
	\end{proof}
	
	%It is probably a good idea to think of Theorem \ref{Thm-MainMultipleSetResult} as a max relation cardinality (max multiplicity) sufficient condition.  It is a sufficient condition to ensure the max cardinality is at least $t$ (supposing we are allowed to add sufficiently many sets with max degree $d$).
	
	%\begin{cor}
	%	Let $s$, $r$, and $d$ be positive integers and $X_1,\ldots, X_s$ be finite sets with max degree $d$ and symmetric relation partitions $P_1,\ldots,P_s$, respectively, where each $P_i \subseteq \{R_1, \ldots, R_r\}$.  Let $p$ be the largest prime satisfying $p \leq \max_{i \in [s]}(\ceil{|X_i|/2})$ and let $t \in [\tfrac{p}{2}, \tfrac{pr}{2}]$.  If $\bigcap_{i\in [s]}P_i$ has cardinality at least $t- \ceil{p/d}+1$, then there exists a $k \in [r]$ such that $|R_k|>t$.
	%\end{cor}

	%\begin{cor}
	%	Let $X_1,\ldots,X_s$ be finite metric spaces satisfying $\sum_{i\in[s]}{|X_i| \choose 2} = {t+1 \choose 2}$ for some $t \in \N$.  Suppose the internal distinct distances of these sets are in $\{d_1,\ldots,d_{t}\}$.  Suppose each point in $X_i$ is at equal distance to at most $d$ other points in $X_i$.  Let $p$ be the largest prime satisfying $p \leq \max_{i \in [s]}(\ceil{|X_i|/2})$.  Let $P_1,\ldots, P_s$ be the distance sets of $X_1,\ldots, X_s$, respectively, where each $P_i \subseteq \{d_1,\ldots,d_{t-1}\}$.  Suppose $\bigcap_{i\in[s]}P_i$ has cardinality at least $t - \ceil{p/d}+1$.  Then there exists a distance with multiplicity greater than $t$.
	%\end{cor}
	
\end{document}